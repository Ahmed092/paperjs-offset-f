!function(O){"use strict";var v,t;function r(t,r,e){if(void 0===e&&(e=!1),e){var n="function"==typeof r?function(t,e,n){return!r(t,e,n)}:function(t){return t!==r},o=t.filter(n);if(o.length<t.length)return t.splice.apply(t,[0,t.length].concat(o)),!0}else{var i="function"==typeof r?t.findIndex(r):t.indexOf(r);if(-1<i)return t.splice(i,1),!0}return!1}function c(n,r){return 0<n?new Array(n).fill(null).map(function(t,e){return r(e,n)}):[]}function g(t,e,n,r){var o=t.curve===e,i=e.getNormalAtTime(o?0:1).multiply(r),a=t.point.add(i),u=new O.Segment(a),c=o?"handleOut":"handleIn";return u[c]=t[c].add(n.subtract(i).divide(2)),u}function S(t,e){return t.x*e.y-t.y*e.x}function m(t,e,n,r,o,i){var a,u,c,s,f,l,d,h,p,v,g,m,w,y,P=new O.Curve(t[0],t[1]),b=new O.Curve(e[0],e[1]),A=P.getIntersections(b),I=t[1].point.getDistance(e[0].point);if(n.isSmooth())e[0].handleOut=e[0].handleOut.project(n.handleOut),e[0].handleIn=t[1].handleIn.project(n.handleIn),e[0].point=t[1].point.add(e[0].point).divide(2),t.pop();else if(0===A.length)if(I>.1*Math.abs(o))switch(r){case"miter":var M=(d=P.point2,h=P.point2.add(P.getTangentAtTime(1)),p=b.point1,v=b.point1.add(b.getTangentAtTime(0)),g=d.subtract(h),m=p.subtract(v),w=S(d,h),y=S(p,v),new O.Point(w*m.x-g.x*y,w*m.y-g.y*y).divide(S(g,m)));Math.max(M.getDistance(P.point2),M.getDistance(b.point1))<Math.abs(o)*i&&t.push(new O.Segment(M));break;case"round":var k=(a=t[1],u=e[0],c=n.point,s=o,f=a.point.subtract(c).add(u.point.subtract(c)).normalize(Math.abs(s)).add(c),l=new O.Path.Arc({from:a.point,to:u.point,through:f,insert:!1}),a.handleOut=l.firstSegment.handleOut,u.handleIn=l.lastSegment.handleIn,3===l.segments.length?l.segments[1]:null);k&&t.push(k)}else e[0].handleIn=t[1].handleIn,t.pop();else{var x=P.divideAt(A[0]);if(x){M=x.segment1;var C=b.divideAt(b.getIntersections(P)[0]);M.handleOut=C?C.segment1.handleOut:e[0].handleOut,t.pop(),e[0]=M}else e[0].handleIn=t[1].handleIn,t.pop()}}function w(t){return 1===t.children.length&&(t=t.children[0]).remove(),t}function y(t,e){if(void 0===e&&(e=.01),t.closed){var n=Math.abs(t.area*e);if(t.clockwise||t.reverse(),(t=t.unite(t,{insert:!1}))instanceof O.CompoundPath&&(t.children.filter(function(t){return Math.abs(t.area)<n}).forEach(function(t){return t.remove()}),1===t.children.length))return w(t)}return t}function P(t,e){var n=(t.segments[0].location.offset+t.segments[Math.max(1,Math.floor(t.segments.length/2))].location.offset)/3;return e.getNearestLocation(t.getPointAt(n)).offset<e.getNearestLocation(t.getPointAt(2*n)).offset}function b(t,e){var n;((n=t)instanceof O.CompoundPath?v.Flat(n.children.map(function(t){return t.segments})):n.segments).slice().forEach(function(t){e.contains(t.point)||t.remove()})}function h(t,e,n,r){var o,i,a,u,c;u=e,(c=(a=t).clone({insert:!1})).reduce({}),a.clockwise||(c.reverse(),u=-u),e=(o=[c,u])[1];var s,f,l=(i=o[0]).curves.slice(),d=v.Divide(v.Flat(l.map(function(t){return function t(e,n){var r=new O.Curve(e.segment1.handleOut.add(e.segment1.point),new O.Point(0,0),new O.Point(0,0),e.segment2.handleIn.add(e.segment2.point)).getNormalAtTime(.5).multiply(n),o=g(e.segment1,e,r,n),i=g(e.segment2,e,r,n),a=new O.Curve(o,i);if(0===a.getIntersections(a).length){var u=Math.min(Math.abs(n)/10,1),c=a.getPointAtTime(.5).getDistance(e.getPointAtTime(.5));if(Math.abs(c-Math.abs(n))>u){var s=e.divideAtTime(.5);if(null!=s)return t(e,n).concat(t(s,n))}}return[o,i]}(t,e)})),2),h=v.Flat(function(t,e,n,r,o){for(var i=n.segments,a=t[0].slice(),u=0;u<t.length-1;++u)m(t[u],t[u+1],i[u+1],e,r,o);return n.closed&&(m(t[t.length-1],a,i[0],e,r,o),t[0][0]=a[0]),t}(d,n,i,e,r)),p=(s=new O.Path({segments:h,insert:!1,closed:t.closed}),(f=s.unite(s,{insert:!1}))instanceof O.CompoundPath?(f.children.filter(function(t){return!(1<t.segments.length&&P(t,s))}).forEach(function(t){return t.remove()}),w(f)):s);return p.reduce({}),i.closed&&(i.clockwise&&e<0||!i.clockwise&&0<e)&&b(p,t),i.clockwise!==t.clockwise&&p.reverse(),y(p)}function p(t,e,n){var r=t.point.add(e.point).divide(2),o=e.point.subtract(t.point).rotate(-90,new O.Point(0,0)).normalize(n),i=r.add(o);return new O.Path.Arc({from:t.point,to:e.point,through:i,insert:!1}).segments}function l(t,e,n,r,o){var i=h(t,e=t.clockwise?e:-e,n,o),a=h(t,-e,n,o);if(t.closed)return i.subtract(a,{insert:!1});var u=a,c=new Array;a instanceof O.CompoundPath&&((c=a.children.filter(function(t){return t.closed})).forEach(function(t){return t.remove()}),u=a.children[0]),u.reverse();var s=function(t,e,n,r){if(t instanceof O.CompoundPath){var o=t.children.map(function(t){return{c:t,a:Math.abs(t.area)}});t=(o=o.sort(function(t,e){return e.a-t.a}))[0].c}var i=t.segments.slice(),a=e.segments.slice();switch(r){case"round":var u=p(a[a.length-1],i[0],n),c=p(i[i.length-1],a[0],n),s=new O.Path({segments:u.concat(i,c,a),closed:!0,insert:!1});return s.reduce({}),s;default:return new O.Path({segments:i.concat(a),closed:!0,insert:!1})}}(i,u,e,r);if(0<c.length)for(var f=0,l=c;f<l.length;f++){var d=l[f];s=s.subtract(d,{insert:!1})}return s}O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,(t=v=v||{}).Delete=r,t.BatchDelete=function(e,t,n){void 0===n&&(n=!1),t.forEach(function(t){r(e,t,n)})},t.Replace=function(t,e,n,r){if(void 0===r&&(r=!1),null==t)return!1;var o=!1;do{var i="function"==typeof e?t.findIndex(e):t.indexOf(e);if(!(-1<i))break;t[i]=n,o=!0}while(r);return o},t.Find=function(t,e){var n=t.findIndex(e);return t[n]},t.IncludeSome=function(e,t){return t.some(function(t){return e.includes(t)})},t.OrderedInsert=function(t,e,n,r){void 0===r&&(r=!1);var o=t.findIndex(function(t){return 0<=n(t,e)});if(-1<o){var i=0===n(t[o],e);return t.splice(o,i&&r?1:0,e),o}return t.push(e),t.length-1},t.InsertBefore=function(t,e,n){var r=t.indexOf(n);t.splice(Math.max(r,0),0,e)},t.InsertAfter=function(t,e,n){var r=t.indexOf(n);-1<r?t.splice(r+1,0,e):t.push(n)},t.ApproximateIndex=function(t,e,n){return void 0===n&&(n=0),t.findIndex(function(t){return Math.abs(t-e)<=n})},t.Approximate=function(t,e,n){void 0===n&&(n=0);var r=t.findIndex(function(t){return Math.abs(t-e)<=n});return t[r]},t.Empty=function(t){return 0<t?new Array(t).fill(null):[]},t.Create=c,t.Repeat=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return c(e*n.length,function(t){return n[Math.floor(t/e)]})},t.RepeatSequence=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c(t*e.length,function(t){return e[t%e.length]})},t.AnalyzePeriod=function(t){for(var e=Math.ceil(Math.sqrt(t.length)),n=1;n<=e;++n)if(t.length%n==0){for(var r=t.slice(0,n),o=!0,i=n;i<t.length;++i)if(t[i]!==r[i%n]){o=!1;break}if(o)return r}return t},t.Flat=function(t,e){void 0===e&&(e=!1);var n=Array.prototype.concat.apply([],t);return e?n:n.filter(function(t){return null!=t})},t.Divide=function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},t.Group=function(r,o){var i={};return r.forEach(function(t,e){var n=o(t,e,r);i[n]||(i[n]=[]),i[n].push(t)}),i},t.Sample=function(e,t,n){if(void 0===n&&(n=!1),t>=e.length)return e;if(n){for(var r=[],o=e.slice(),i=0;i<t;++i){var a=o.splice(Math.round(o.length*Math.random()),1)[0];r.push(a)}return r}var u=e.length/t;return c(t,function(t){return e[Math.round(u*t)]})},t.Union=function(t,e){void 0===e&&(e=!1);var n=Array.prototype.concat.apply([],t);return e?Array.from(new Set(n)):n},t.Intersect=function(n){if(1<n.length){var e=new Map;n[0].forEach(function(t){return e.set(t,1)});for(var t=1;t<n.length;++t)n[t].forEach(function(t){e.has(t)&&e.set(t,e.get(t)+1)});var r=new Array;return e.forEach(function(t,e){t===n.length&&r.push(e)}),r}return n[0]||[]},t.Subtract=function(t,e){if(1<e.length){var n=new Set(Array.prototype.concat.apply([],e));return t.filter(function(t){return!n.has(t)})}return t||[]},t.NonNull=function(t){return t.filter(function(t){return null!=t})};var e,n=(o.offset=function(t,e,n){var r=function(n,r,o,i){var t=n.unite(n,{insert:!1}),e=t;if(t instanceof O.Path)e=h(t,r,o,i);else{var a=v.Flat(t.children.map(function(t){if(1<t.segments.length){P(t,n)||t.reverse();var e=h(t,r,o,i);return(e=y(e)).clockwise!==t.clockwise&&e.reverse(),e instanceof O.CompoundPath?(e.applyMatrix=!0,e.children):e}return null}),!1);e=new O.CompoundPath({children:a,insert:!1})}return e.copyAttributes(t,!1),e.remove(),e}(t,e,(n=n||{}).join||"miter",n.limit||10);return void 0===n.insert&&(n.insert=!0),n.insert&&(t.parent||O.project.activeLayer).addChild(r),r},o.offsetStroke=function(t,e,n){var r,o,i,a,u,c,s,f=(r=t,o=e,i=(n=n||{}).join||"miter",a=n.cap||"butt",u=n.limit||10,c=r.unite(r,{insert:!1}),(s=(s=c)instanceof O.Path?l(c,o,i,a,u):v.Flat(c.children.map(function(t){return l(t,o,i,a,u)})).reduce(function(t,e){return t.unite(e,{insert:!1})})).strokeWidth=0,s.fillColor=c.strokeColor,s.shadowBlur=c.shadowBlur,s.shadowColor=c.shadowColor,s.shadowOffset=c.shadowOffset,s);return void 0===n.insert&&(n.insert=!0),n.insert&&(t.parent||O.project.activeLayer).addChild(f),f},o);function o(){}(e=O).Path.prototype.offset=function(t,e){return n.offset(this,t,e)},e.Path.prototype.offsetStroke=function(t,e){return n.offsetStroke(this,t,e)},e.CompoundPath.prototype.offset=function(t,e){return n.offset(this,t,e)},e.CompoundPath.prototype.offsetStroke=function(t,e){return n.offsetStroke(this,t,e)},window.PaperOffset={offset:n.offset,offsetStroke:n.offsetStroke}}(paper);
